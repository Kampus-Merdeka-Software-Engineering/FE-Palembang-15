<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video_E-Learning</title>
    <link rel="stylesheet" type="text/css" href="css/video.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="script.js"></script>
</head>

<body>
    <div class="parent-container">
        <div id="header-container"></div>
        <script>
            $(function() {
                $("#header-container").load("header.html");
            });
        </script>

        <div class="main-container">
            <div class="video-learning">
                <div class="video-container">
                    <iframe id="courseVideo" allow="autoplay"></iframe>
                </div>
                <div class="course-content-container">
                    <h1>Course Content</h2>
                    <div class="course-list" id="courseList">
                        <!-- <div class="course-item">
                            <h2>01</h2>
                            <div class="course-details">
                                <p class="course-title">Welcome to the course</p>
                            </div>
                        </div>
                        <hr class="course-divider">
                        <div class="course-item">
                            <h2>02</h2>
                            <div class="course-details">
                                <p class="course-title">Design Thinking-Intro</p>
                            </div>
                        </div>
                        <hr class="course-divider">
                        <div class="course-item">
                            <h2>03</h2>
                            <div class="course-details">
                                <p class="course-title">Design Thinking Process</p>
                            </div>
                        </div>
                        <hr class="course-divider">
                        <div class="course-item">
                            <h2>04</h2>
                            <div class="course-details">
                                <p class="course-title">Customer Perspective</p>
                            </div>
                        </div> -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="main-container2">
        <div class="introduction-course">
            <h2 id="judul-content"></h2>
            <p id="deskripsi"></p>
        </div>
        <hr class="course-divider">
        <h2 class="title-comment">Komentar Mengenai E-Learning</h2>
        <div class="comments-row">
            <div class="comment-container">
                <h3>John</h3>
                <p class="comment-jabatan">UI/UX Designer</p>
                <p class="comment-desc">Saya sangat senang mengikuti kursus online ini. Materi yang diajarkan sangat relevan dengan pekerjaan saya, dan instrukturnya sangat berpengetahuan. Saya telah memperoleh banyak keterampilan baru dan telah menerapkannya dalam pekerjaan
                    sehari-hari saya. Terima kasih banyak!</p>
            </div>
            <div class="comment-container">
                <h3>Grace</h3>
                <p class="comment-jabatan">Front-End Engineer</p>
                <p class="comment-desc">Saya ingin memberikan apresiasi besar kepada penyelenggara kursus online ini. Materi-materi yang diajarkan sangat praktis dan relevan dengan industri saat ini. Instruktur memiliki pengetahuan yang mendalam dan selalu responsif terhadap
                    pertanyaan peserta.</p>
            </div>
            <div class="comment-container">
                <h3>Harley</h3>
                <p class="comment-jabatan">Web Developer</p>
                <p class="comment-desc">Online course ini adalah pengalaman yang luar biasa. Selain materi yang sangat berguna, platform pembelajarannya intuitif dan mudah digunakan. Saya juga menghargai fleksibilitas waktu belajar, yang memungkinkan saya untuk mengikuti kursus
                    sambil menjalankan pekerjaan penuh waktu. </p>
            </div>
        </div>
    </div>

    <div class="parent-container">
        <h2 class="form-judul">Form Komentar</h2>
        <div class="form-container">
            <h3>Bagaimana pengalaman mengikuti EduCareerskill? <br> berbagi bersama kami!</h3>
            <p>isilah formulir dibawah ini berdasakan pengalaman para pengguna setelah mengikuti berbagai program yang diberikan oleh EduCareerSkill.</p>
            <form id="commentForm" method="POST" enctype="multipart/form-data" action="">
                <div class="form-group">
                    <label class="form-label" for="nama">Nama</label>
                    <input class="form-input" type="text" id="nama" name="nama" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="email">Email</label>
                    <input class="form-input" type="email" id="email" name="email" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="jabatan">Jabatan</label>
                    <input class="form-input" type="text" id="jabatan" name="jabatan" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="komentar">Komentar</label>
                    <textarea class="form-input" id="komentar" name="komentar" rows="4" required></textarea>
                </div>
                <button id="submitBtn" class="form-button" type="submit">Submit</button>
                <script>
                    function buttonClick() {
                        alert("Terima kasih telah menambahkan Komentar!");
                    }

                    // GET button element menggunakan DOM
                    var button = document.getElementById("submitBtn");

                    // Menambahkan event listener ke button 
                    button.addEventListener("click", buttonClick);
                </script>
            </form>
        </div>
    </div>
    <!-- footer start here -->
    <div id="footer-container"></div>
    <script>
        $(function() {
            $("#footer-container").load("footer.html");
        });
    </script>
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const courseId = urlParams.get('courseId');
        const episode = parseInt(urlParams.get('episode')) || 1;
        console.log('courseId:', courseId);
        console.log('episode:', episode);

        const loadCourseContent = async (courseId, episode) => {
            const response = await fetch(`https://broad-minute-production.up.railway.app/contents/${courseId}/${episode}`);

            const responseData = await response.json();
            console.log('Response Data:', responseData);

            const ContentData = responseData.data[0];
            console.log("dataaa", responseData)
            const videoUrl = ContentData.video;
            console.log('Video URL:', videoUrl);
            document.getElementById('courseVideo').src = videoUrl;

            const judulContent = ContentData.judulContent;
            document.getElementById('judul-content').innerHTML = judulContent;

            const deskripsiContent = ContentData.deskripsi;
            document.getElementById('deskripsi').innerHTML = deskripsiContent;

            const contentId = ContentData.id;
            console.log("liat data contentid", contentId);

            const responseAll = await fetch(`https://broad-minute-production.up.railway.app/contents/courses/${courseId}`);
            const responseAllData = await responseAll.json();
            const AllContents = responseAllData.data;

            const courseList = document.getElementById('courseList');

            AllContents.forEach((content, index) => {
                    const contentItem = document.createElement('div');
                    contentItem.classList.add("course-item");

                    contentItem.innerHTML = `
                            <div class="list-content2" onclick="tampilinVideo(${content.CourseId}, ${content.episode})">
                                <h2>0${index + 1}</h2>
                                <div class="course-details">
                                    <p class="course-title">${content.judulContent}</p>
                                </div>
                            </div>`;
                    courseList.appendChild(contentItem);

                    if (index < AllContents.length - 1) {
                        const hrElement = document.createElement('hr');
                        hrElement.classList.add("course-divider");
                        courseList.appendChild(hrElement);
                     }
            });

            const handleSubmitForm = (event) => {
                event.preventDefault();

                fetch("https://broad-minute-production.up.railway.app/comments", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({
                        nama: document.getElementById("nama").value,
                        email: document.getElementById("email").value,
                        jabatan: document.getElementById("jabatan").value,
                        komentar: document.getElementById("komentar").value,
                        ContentId: contentId,
                    }),
                });
            };

            document.getElementById("commentForm").onsubmit = handleSubmitForm;

        };

        loadCourseContent(courseId, episode);

    </script>
</body>

</html>